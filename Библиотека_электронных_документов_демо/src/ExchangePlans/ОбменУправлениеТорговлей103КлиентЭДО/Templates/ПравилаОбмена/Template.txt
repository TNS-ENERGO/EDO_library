<ПравилаОбмена>
	<ВерсияФормата РежимСовместимости="РежимСовместимостиСБСП20">2.01</ВерсияФормата>
	<Ид>38dfc35e-de5f-439c-b332-e4708aa0fded    </Ид>
	<Наименование>КЭДО --&gt; УТ</Наименование>
	<ДатаВремяСоздания>2018-01-12T15:03:39</ДатаВремяСоздания>
	<Источник ВерсияПлатформы="8.0" ВерсияКонфигурации="2.3.10.40" СинонимКонфигурации="Клиент ЭДО (базовая), редакция 2.3">КлиентЭДОБазовая</Источник>
	<Приемник ВерсияПлатформы="8.0" ВерсияКонфигурации="10.3.45.4" СинонимКонфигурации="Управление торговлей, редакция 10.3">УправлениеТорговлей</Приемник>
	<ПослеПолученияИнформацииОбУзлахОбмена>Параметры.Вставить("Склад");
Параметры.Вставить("ЦенаВключаетНДС");

ЗаполнитьЗначенияСвойств(Параметры, УзелОбменаЗагрузкаДанных);</ПослеПолученияИнформацииОбУзлахОбмена>
	<ПередЗагрузкойДанных>Параметры.Вставить("Кэш", Новый Соответствие);
Параметры.Вставить("ИспользоватьСерииНоменклатуры", глЗначениеПеременной("ИспользоватьСерииНоменклатуры"));</ПередЗагрузкойДанных>
	<ПередОтправкойИнформацииОбУдалении>Отказ = Истина;

Если ТипЗнч(Ссылка) = Тип("ДокументСсылка.ПоступлениеТоваровУслуг") Тогда
	
	ЗаписатьВФайлУдалениеОбъекта(Ссылка, "ДокументСсылка.ПоступлениеТоваровУслуг", "ДокументСсылка.ПоступлениеТоваровУслуг");
	ЗаписатьВФайлУдалениеОбъекта(Ссылка, "ДокументСсылка.КорректировкаПоступления", "ДокументСсылка.ПоступлениеТоваровУслуг");
	ЗаписатьВФайлУдалениеОбъекта(Ссылка, "ДокументСсылка.ВозвратТоваровОтПокупателя", "ДокументСсылка.ПоступлениеТоваровУслуг");
	
ИначеЕсли ТипЗнч(Ссылка) = Тип("ДокументСсылка.СчетФактураПолученный") Тогда
	
	ЗаписатьВФайлУдалениеОбъекта(Ссылка, "ДокументСсылка.СчетФактураПолученный", "ДокументСсылка.СчетФактураПолученный");
	
Иначе
	Отказ = Ложь;
КонецЕсли;</ПередОтправкойИнформацииОбУдалении>
	<ПриПолученииИнформацииОбУдалении>МетаданныеОбъекта = Объект.Метаданные();

Если Метаданные.Справочники.Содержит(МетаданныеОбъекта) Тогда
	
	Отказ  = Истина;
	
	УстановитьПометкуУдаленияУОбъекта(Объект, Истина, "Справочник");
	
ИначеЕсли Метаданные.Документы.Содержит(МетаданныеОбъекта) Тогда
	
	Отказ  = Истина;
	
	Если Объект.Проведен Тогда
		
		ОтменитьПроведениеОбъектаВИБ(Объект, ТипЗнч(Объект));
		
	КонецЕсли;
	
	УстановитьПометкуУдаленияУОбъекта(Объект, Истина, "Документ");
	
КонецЕсли;</ПриПолученииИнформацииОбУдалении>
	<Параметры/>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Группа>
			<Код>Перечисления</Код>
			<Наименование>Перечисления</Наименование>
			<Порядок>50</Порядок>
			<Правило>
				<Код>ЮрФизЛицо</Код>
				<Наименование>Перечисление: Демо: Юридическое / физическое лицо</Наименование>
				<Порядок>50</Порядок>
				<Источник>ПеречислениеСсылка.ЮрФизЛицо</Источник>
				<Приемник>ПеречислениеСсылка.ЮрФизЛицо</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ФизЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>50</Порядок>
						<Источник>ФизЛицо</Источник>
						<Приемник>ФизЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ЮрЛицо --&gt; ЮрЛицо</Наименование>
						<Порядок>100</Порядок>
						<Источник>ЮрЛицо</Источник>
						<Приемник>ЮрЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ИндивидуальныйПредприниматель --&gt; ФизЛицо</Наименование>
						<Порядок>150</Порядок>
						<Источник>ИндивидуальныйПредприниматель</Источник>
						<Приемник>ФизЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ЮрЛицоНеРезидент --&gt; ЮрЛицо</Наименование>
						<Порядок>200</Порядок>
						<Источник>ЮрЛицоНеРезидент</Источник>
						<Приемник>ЮрЛицо</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>СтавкиНДС</Код>
				<Наименование>Перечисление: Ставки НДС</Наименование>
				<Порядок>100</Порядок>
				<Источник>ПеречислениеСсылка.СтавкиНДС</Источник>
				<Приемник>ПеречислениеСсылка.СтавкиНДС</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>БезНДС --&gt; БезНДС</Наименование>
						<Порядок>50</Порядок>
						<Источник>БезНДС</Источник>
						<Приемник>БезНДС</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>НДС0 --&gt; НДС0</Наименование>
						<Порядок>100</Порядок>
						<Источник>НДС0</Источник>
						<Приемник>НДС0</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>НДС10 --&gt; НДС10</Наименование>
						<Порядок>150</Порядок>
						<Источник>НДС10</Источник>
						<Приемник>НДС10</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>НДС10_110 --&gt; НДС10_110</Наименование>
						<Порядок>200</Порядок>
						<Источник>НДС10_110</Источник>
						<Приемник>НДС10_110</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>НДС18 --&gt; НДС18</Наименование>
						<Порядок>250</Порядок>
						<Источник>НДС18</Источник>
						<Приемник>НДС18</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>НДС18_118 --&gt; НДС18_118</Наименование>
						<Порядок>300</Порядок>
						<Источник>НДС18_118</Источник>
						<Приемник>НДС18_118</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыНоменклатуры</Код>
				<Наименование>Перечисление: Типы номенклатуры</Наименование>
				<Порядок>150</Порядок>
				<Источник>ПеречислениеСсылка.ТипыНоменклатуры</Источник>
				<Приемник>ПеречислениеСсылка.ТипыНоменклатуры</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Товар --&gt; Товар</Наименование>
						<Порядок>50</Порядок>
						<Источник>Товар</Источник>
						<Приемник>Товар</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Услуга --&gt; Услуга</Наименование>
						<Порядок>100</Порядок>
						<Источник>Услуга</Источник>
						<Приемник>Услуга</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Работа --&gt; Услуга</Наименование>
						<Порядок>150</Порядок>
						<Источник>Работа</Источник>
						<Приемник>Услуга</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Право --&gt; Услуга</Наименование>
						<Порядок>200</Порядок>
						<Источник>Право</Источник>
						<Приемник>Услуга</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыКонтактнойИнформации</Код>
				<Наименование>Перечисление: Типы контактной информации</Наименование>
				<Порядок>200</Порядок>
				<Источник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Источник>
				<Приемник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Адрес --&gt; Адрес</Наименование>
						<Порядок>50</Порядок>
						<Источник>Адрес</Источник>
						<Приемник>Адрес</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>АдресЭлектроннойПочты --&gt; АдресЭлектроннойПочты</Наименование>
						<Порядок>100</Порядок>
						<Источник>АдресЭлектроннойПочты</Источник>
						<Приемник>АдресЭлектроннойПочты</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ВебСтраница --&gt; ВебСтраница</Наименование>
						<Порядок>150</Порядок>
						<Источник>ВебСтраница</Источник>
						<Приемник>ВебСтраница</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Другое --&gt; Другое</Наименование>
						<Порядок>200</Порядок>
						<Источник>Другое</Источник>
						<Приемник>Другое</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Телефон --&gt; Телефон</Наименование>
						<Порядок>250</Порядок>
						<Источник>Телефон</Источник>
						<Приемник>Телефон</Приемник>
					</Значение>
				</Значения>
			</Правило>
		</Группа>
		<Группа>
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>100</Порядок>
			<Правило>
				<Код>Валюты</Код>
				<Наименование>Справочник: Валюты</Наименование>
				<Порядок>50</Порядок>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Код";</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.Валюты</Источник>
				<Приемник>СправочникСсылка.Валюты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Организации</Код>
				<Наименование>Справочник: Организации</Наименование>
				<Порядок>100</Порядок>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 тогда
	СтрокаИменСвойствПоиска = "ИНН, КПП";
ИначеЕсли НомерВариантаПоиска = 2 тогда
	СтрокаИменСвойствПоиска = "ИНН";
Иначе
	СтрокаИменСвойствПоиска = "Наименование";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.Организации</Источник>
				<Приемник>СправочникСсылка.Организации</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Контрагенты</Код>
				<Наименование>Справочник: Контрагенты</Наименование>
				<Порядок>150</Порядок>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 Тогда
	СтрокаИменСвойствПоиска = "ИНН, КПП";
ИначеЕсли НомерВариантаПоиска = 2 Тогда
	СтрокаИменСвойствПоиска = "ИНН";
ИначеЕсли НомерВариантаПоиска = 3 Тогда
	СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>СправочникСсылка.Контрагенты</Источник>
				<Приемник>СправочникСсылка.Контрагенты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>10</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>2</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ЮрФизЛицо --&gt; ЮрФизЛицо</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
						<Приемник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>--&gt; Поставщик</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поставщик" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ДоговорыКонтрагентов</Код>
				<Наименование>Справочник: Договоры</Наименование>
				<Порядок>200</Порядок>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 тогда 
	СтрокаИменСвойствПоиска = "НомерДоговора, ДатаДоговора, Владелец, Организация"; 
ИначеЕсли НомерВариантаПоиска = 2 тогда 
	СтрокаИменСвойствПоиска = "Наименование, Владелец, Организация, ЭтоГруппа";
КонецЕсли;</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.ДоговорыКонтрагентов</Источник>
				<Приемник>СправочникСсылка.ДоговорыКонтрагентов</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>ДатаДоговора --&gt; Дата</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ДатаДоговора" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>11</Код>
						<Наименование>НомерДоговора --&gt; Номер</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="НомерДоговора" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>6</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ДатаНачалаДействия --&gt; Дата</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ДатаНачалаДействия" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>ДатаОкончанияДействия --&gt; СрокДействия</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ДатаОкончанияДействия" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="СрокДействия" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ВалютаРасчетов --&gt; ВалютаВзаиморасчетов</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ВалютаРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>--&gt; ВидДоговора</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидДоговора" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДоговоровКонтрагентов"/>
						<ПередВыгрузкой>Значение = "СПоставщиком";</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>--&gt; ВедениеВзаиморасчетов</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВедениеВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВедениеВзаиморасчетовПоДоговорам"/>
						<ПередВыгрузкой>Значение = "ПоДоговоруВЦелом";</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Банки</Код>
				<Наименование>Справочник: Классификатор банков</Наименование>
				<Порядок>250</Порядок>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Код";</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.КлассификаторБанков</Источник>
				<Приемник>СправочникСсылка.Банки</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Адрес --&gt; Адрес</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Город --&gt; Город</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>КоррСчет --&gt; КоррСчет</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Телефоны --&gt; Телефоны</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.КлассификаторБанков"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Банки"/>
					</Свойство>
					<Свойство Обязательное="true">
						<Код>9</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>БанковскиеСчета</Код>
				<Наименование>Справочник: Банковские счета</Наименование>
				<Порядок>300</Порядок>
				<ПередВыгрузкой>Если ТипЗнч(Источник.Владелец) = Тип("СправочникСсылка.Организации") Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "НомерСчета, Владелец";</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.БанковскиеСчета</Источник>
				<Приемник>СправочникСсылка.БанковскиеСчета</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>НомерСчета --&gt; НомерСчета</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Владелец" Вид="Свойство"/>
						<Приемник Имя="Владелец" Вид="Свойство"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Банк --&gt; Банк</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторБанков"/>
						<Приемник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>БанкДляРасчетов --&gt; БанкДляРасчетов</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторБанков"/>
						<Приемник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
						<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВидыНоменклатуры</Код>
				<Наименование>Справочник: Виды номенклатуры</Наименование>
				<Порядок>350</Порядок>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Наименование";</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.ВидыНоменклатуры</Источник>
				<Приемник>СправочникСсылка.ВидыНоменклатуры</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ТипНоменклатуры --&gt; ТипНоменклатуры</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ТипНоменклатуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНоменклатуры"/>
						<Приемник Имя="ТипНоменклатуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНоменклатуры"/>
						<КодПравилаКонвертации>ТипыНоменклатуры                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторЕдиницИзмерения</Код>
				<Наименование>Справочник: Единицы измерения</Наименование>
				<Порядок>400</Порядок>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Код";</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.ЕдиницыИзмерения</Источник>
				<Приемник>СправочникСсылка.КлассификаторЕдиницИзмерения</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>МеждународноеСокращение --&gt; МеждународноеСокращение</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="МеждународноеСокращение" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="МеждународноеСокращение" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторСтранМира</Код>
				<Наименование>Справочник: Страны мира</Наименование>
				<Порядок>450</Порядок>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Код";</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.СтраныМира</Источник>
				<Приемник>СправочникСсылка.КлассификаторСтранМира</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>КодАльфа2 --&gt; КодАльфа2</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="КодАльфа2" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодАльфа2" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Номенклатура</Код>
				<Наименование>Справочник: Номенклатура</Наименование>
				<Порядок>500</Порядок>
				<ПослеЗагрузки>Если НЕ Объект.ЭтоГруппа Тогда
	
	Если Объект.ЭтоНовый()
		И Параметры.ИспользоватьСерииНоменклатуры
		И ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		Объект.ВестиУчетПоСериям = ПараметрыОбъекта.Получить("УчетПоСериям");
	КонецЕсли;

	Если НЕ ЗначениеЗаполнено(Объект.ЕдиницаХраненияОстатков) Тогда
		ЕдиницаИзмерения = Неопределено;
		
		Если НЕ Объект.ЭтоНовый() Тогда
			Запрос = Новый Запрос;
			Запрос.Текст = 
				"ВЫБРАТЬ ПЕРВЫЕ 1
				|	ЕдиницыИзмерения.Ссылка КАК Ссылка
				|ИЗ
				|	Справочник.ЕдиницыИзмерения КАК ЕдиницыИзмерения
				|ГДЕ
				|	ЕдиницыИзмерения.Владелец = &amp;Ссылка
				|	И НЕ ЕдиницыИзмерения.ПометкаУдаления";
			Запрос.УстановитьПараметр("Ссылка", Объект.Ссылка);
			Выборка = Запрос.Выполнить().Выбрать();
			Если Выборка.Следующий() Тогда
				ЕдиницаИзмерения = Выборка.Ссылка;
			КонецЕсли;
		КонецЕсли;
		
		Если ЕдиницаИзмерения = Неопределено Тогда
			ЕдиницаИзмеренияОбъект = Справочники.ЕдиницыИзмерения.СоздатьЭлемент();
			ЕдиницаИзмеренияОбъект.Наименование            = СокрЛП(Объект.БазоваяЕдиницаИзмерения);
			ЕдиницаИзмеренияОбъект.ЕдиницаПоКлассификатору = Объект.БазоваяЕдиницаИзмерения;
			ЕдиницаИзмеренияОбъект.Коэффициент             = 1;
			ЕдиницаИзмеренияОбъект.Владелец                = Объект.Ссылка;
			Если Объект.ЭтоНовый() Тогда
				ЕдиницаИзмеренияОбъект.Владелец = Объект.ПолучитьСсылкуНового();
			Иначе
				ЕдиницаИзмеренияОбъект.Владелец = Объект.Ссылка;
			КонецЕсли;
			ЕдиницаИзмеренияОбъект.УстановитьНовыйКод();
			ЕдиницаИзмеренияОбъект.ОбменДанными.Загрузка = Истина;
			Попытка
				ЕдиницаИзмеренияОбъект.Записать();
			Исключение
				ЗаписьЖурналаРегистрации(НСтр("ru = 'Загрузка данных из Клиента ЭДО'", ОбщегоНазначенияКлиентСервер.КодОсновногоЯзыка()),
					УровеньЖурналаРегистрации.Ошибка, ЕдиницаИзмеренияОбъект.Метаданные(),,
					ПодробноеПредставлениеОшибки(ИнформацияОбОшибке()));
			КонецПопытки;
			
			ЕдиницаИзмерения = ЕдиницаИзмеренияОбъект.Ссылка;
		КонецЕсли;
		
		Объект.ЕдиницаХраненияОстатков = ЕдиницаИзмерения;
	КонецЕсли;

	Если НЕ ЗначениеЗаполнено(Объект.ЕдиницаДляОтчетов)
		И ЗначениеЗаполнено(Объект.ЕдиницаХраненияОстатков) Тогда
		Объект.ЕдиницаДляОтчетов = Объект.ЕдиницаХраненияОстатков;
	КонецЕсли;

КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>Если НомерВариантаПоиска = 1 Тогда
	Если ЗначениеЗаполнено(СвойстваПоиска.Получить("Артикул")) Тогда
		СтрокаИменСвойствПоиска = "Артикул";
	Иначе
		СтрокаИменСвойствПоиска = "Наименование, Родитель, ЭтоГруппа";
	КонецЕсли;
ИначеЕсли НомерВариантаПоиска = 2 Тогда
	СтрокаИменСвойствПоиска = "Наименование, ЭтоГруппа";
КонецЕсли;
</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<Источник>СправочникСсылка.Номенклатура</Источник>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Артикул --&gt; Артикул</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>10</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>2</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ВидНоменклатуры --&gt; ВидНоменклатуры</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ВидНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ВидыНоменклатуры"/>
						<Приемник Имя="ВидНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ВидыНоменклатуры"/>
						<КодПравилаКонвертации>ВидыНоменклатуры                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>ЕдиницаИзмерения --&gt; БазоваяЕдиницаИзмерения</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						<Приемник Имя="БазоваяЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>--&gt; Услуга</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Услуга" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(ВходящиеДанные) И ВходящиеДанные.Свойство("ЭтоУслуга") Тогда
	Значение = ВходящиеДанные.ЭтоУслуга; 
Иначе
	ТипНоменклатуры = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Источник.ВидНоменклатуры, "ТипНоменклатуры");
	Значение =  ТипНоменклатуры = Перечисления.ТипыНоменклатуры.Работа
			ИЛИ ТипНоменклатуры = Перечисления.ТипыНоменклатуры.Услуга
			ИЛИ ТипНоменклатуры = Перечисления.ТипыНоменклатуры.Право;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>НомераГТД</Код>
				<Наименование>: </Наименование>
				<Порядок>550</Порядок>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Код";</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<Приемник>СправочникСсылка.НомераГТД</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СерииНоменклатуры</Код>
				<Наименование>: </Наименование>
				<Порядок>600</Порядок>
				<ПослеЗагрузки>УчетПоСериям = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Объект.Владелец, "ВестиУчетПоСериям");

Если УчетПоСериям Тогда

	Строка = "";

	Если ЗначениеЗаполнено(Объект.СерийныйНомер) Тогда
		Строка = Строка + Объект.СерийныйНомер + ", ";
	КонецЕсли;

	Если ЗначениеЗаполнено(Объект.СрокГодности) Тогда
		Строка = Строка + Формат(Объект.СрокГодности,"ДФ=""дд.ММ.гггг""") + ", ";
	КонецЕсли;

	Если ЗначениеЗаполнено(Объект.НомерГТД) Тогда
		Строка = Строка + СокрЛП(Объект.НомерГТД.Код) + ", ";
	КонецЕсли;

	Если ЗначениеЗаполнено(Объект.СтранаПроисхождения) Тогда
		Строка = Строка + Объект.СтранаПроисхождения.Наименование + ", ";
	КонецЕсли;

	Строка = Лев(Строка, СтрДлина(Строка) - 2);

	Если ПустаяСтрока(Строка) Тогда
		Строка = "&lt;Свойства не назначены&gt;";
	КонецЕсли;

	Объект.Наименование = Строка;

Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПослеЗагрузки>
				<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "НомерГТД, Владелец, СтранаПроисхождения";</ПоследовательностьПолейПоиска>
				<НеЗамещать>true</НеЗамещать>
				<Приемник>СправочникСсылка.СерииНоменклатуры</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; НомерГТД</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НомерГТД" Вид="Реквизит" Тип="СправочникСсылка.НомераГТД"/>
						<КодПравилаКонвертации>НомераГТД                                         </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>--&gt; Владелец</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>--&gt; СтранаПроисхождения</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СтранаПроисхождения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторСтранМира"/>
						<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>150</Порядок>
			<Правило>
				<Код>ПоступлениеТоваровУслуг</Код>
				<Наименование>Документ: Поступление (акты, накладные)</Наименование>
				<Порядок>50</Порядок>
				<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = 
	"ВЫБРАТЬ
	|	ПоступлениеТоваровУслугТовары.Номенклатура КАК Номенклатура,
	|	ПоступлениеТоваровУслугТовары.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	|	ПоступлениеТоваровУслугТовары.Количество КАК Количество,
	|	ПоступлениеТоваровУслугТовары.Цена КАК Цена,
	|	ПоступлениеТоваровУслугТовары.Сумма КАК Сумма,
	|	ПоступлениеТоваровУслугТовары.СтавкаНДС КАК СтавкаНДС,
	|	ПоступлениеТоваровУслугТовары.СуммаНДС КАК СуммаНДС,
	|	ПоступлениеТоваровУслугТовары.НомерГТД КАК НомерГТД,
	|	ПоступлениеТоваровУслугТовары.СтранаПроисхождения КАК СтранаПроисхождения
	|ПОМЕСТИТЬ ВТ_Товары
	|ИЗ
	|	Документ.ПоступлениеТоваровУслуг.Товары КАК ПоступлениеТоваровУслугТовары
	|ГДЕ
	|	ПоступлениеТоваровУслугТовары.Ссылка = &amp;Ссылка
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ВТ_Товары.Номенклатура КАК Номенклатура,
	|	ЕСТЬNULL(ЕдиницыИзмерения.Код,"""") КАК КодЕдиницыИзмеренияПоКлассификатору,
	|	ВТ_Товары.Количество КАК Количество,
	|	ВТ_Товары.Цена КАК Цена,
	|	ВТ_Товары.Сумма КАК Сумма,
	|	ВТ_Товары.СтавкаНДС КАК СтавкаНДС,
	|	ВТ_Товары.СуммаНДС КАК СуммаНДС,
	|	ВТ_Товары.НомерГТД КАК НомерГТД,
	|	ВТ_Товары.СтранаПроисхождения КАК СтранаПроисхождения,
	|	ЕСТЬNULL(ВидыНоменклатуры.ТипНоменклатуры,"""") КАК ТипНоменклатуры
	|ПОМЕСТИТЬ ВТ_ТоварыВидыНоменклатуры
	|ИЗ
	|	ВТ_Товары КАК ВТ_Товары
	|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Номенклатура КАК ТаблицаНоменклатуры
	|		ПО ВТ_Товары.Номенклатура = ТаблицаНоменклатуры.Ссылка
	|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ВидыНоменклатуры КАК ВидыНоменклатуры
	|		ПО (ТаблицаНоменклатуры.ВидНоменклатуры = ВидыНоменклатуры.Ссылка)
	|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ЕдиницыИзмерения КАК ЕдиницыИзмерения
	|		ПО (ВТ_Товары.ЕдиницаИзмерения = ЕдиницыИзмерения.Ссылка)
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ВТ_ТоварыВидыНоменклатуры.Номенклатура КАК Номенклатура,
	|	ВТ_ТоварыВидыНоменклатуры.КодЕдиницыИзмеренияПоКлассификатору КАК КодЕдиницыИзмеренияПоКлассификатору,
	|	ВТ_ТоварыВидыНоменклатуры.Количество КАК Количество,
	|	ВТ_ТоварыВидыНоменклатуры.Цена КАК Цена,
	|	ВТ_ТоварыВидыНоменклатуры.Сумма КАК Сумма,
	|	ВТ_ТоварыВидыНоменклатуры.СтавкаНДС КАК СтавкаНДС,
	|	ВТ_ТоварыВидыНоменклатуры.СуммаНДС КАК СуммаНДС,
	|	ВТ_ТоварыВидыНоменклатуры.НомерГТД КАК НомерГТД,
	|	ВТ_ТоварыВидыНоменклатуры.СтранаПроисхождения КАК СтранаПроисхождения
	|ИЗ
	|	ВТ_ТоварыВидыНоменклатуры КАК ВТ_ТоварыВидыНоменклатуры
	|ГДЕ
	|	(ВТ_ТоварыВидыНоменклатуры.ТипНоменклатуры &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Работа)
	|			ИЛИ ВТ_ТоварыВидыНоменклатуры.ТипНоменклатуры &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
	|			ИЛИ ВТ_ТоварыВидыНоменклатуры.ТипНоменклатуры &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Право))
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ВТ_ТоварыВидыНоменклатуры.Номенклатура,
	|	ВТ_ТоварыВидыНоменклатуры.КодЕдиницыИзмеренияПоКлассификатору,
	|	ВТ_ТоварыВидыНоменклатуры.Количество,
	|	ВТ_ТоварыВидыНоменклатуры.Цена,
	|	ВТ_ТоварыВидыНоменклатуры.Сумма,
	|	ВТ_ТоварыВидыНоменклатуры.СтавкаНДС,
	|	ВТ_ТоварыВидыНоменклатуры.СуммаНДС
	|ИЗ
	|	ВТ_ТоварыВидыНоменклатуры КАК ВТ_ТоварыВидыНоменклатуры
	|ГДЕ
	|	(ВТ_ТоварыВидыНоменклатуры.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Работа)
	|			ИЛИ ВТ_ТоварыВидыНоменклатуры.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
	|			ИЛИ ВТ_ТоварыВидыНоменклатуры.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Право))
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ВТ_Товары.Номенклатура КАК Номенклатура
	|ИЗ
	|	ВТ_Товары КАК ВТ_Товары
	|ГДЕ
	|	(ВТ_Товары.СуммаНДС &gt; 0
	|			ИЛИ ВТ_Товары.СтавкаНДС = ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.НДС0))";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

РезультатыЗапроса = Запрос.ВыполнитьПакет();

ВходящиеДанные = Новый Структура;
ВходящиеДанные.Вставить("Товары", РезультатыЗапроса[2].Выгрузить());
ВходящиеДанные.Вставить("Услуги", РезультатыЗапроса[3].Выгрузить());
ВходящиеДанные.Вставить("УчитыватьНДС", НЕ РезультатыЗапроса[4].Пустой());</ПередВыгрузкой>
				<ПослеЗагрузки>Выполнить(Алгоритмы.ЗаполнитьЕдиницыИзмерения);

Объект.ОтражатьВУправленческомУчете = Истина;
Объект.ОтражатьВБухгалтерскомУчете = Истина;
Объект.ОтражатьВНалоговомУчете = Истина;

Объект.ВидПоступления = Перечисления.ВидыПоступленияТоваров.НаСклад;
Параметры.Свойство("Склад", Объект.СкладОрдер);

Если НЕ ЗначениеЗаполнено(Объект.ДоговорКонтрагента)
	И ЗначениеЗаполнено(Объект.Организация)
	И ЗначениеЗаполнено(Объект.Контрагент) Тогда
	
	СписокДопустимыхВидовДоговоров = Новый СписокЗначений;
	СписокДопустимыхВидовДоговоров.Добавить(Перечисления.ВидыДоговоровКонтрагентов.СПоставщиком);
	СтруктураПараметровДляПолученияДоговора = Новый Структура;
	СтруктураПараметровДляПолученияДоговора.Вставить("СписокДопустимыхВидовДоговоров", СписокДопустимыхВидовДоговоров);	
	Объект.ДоговорКонтрагента = ЗаполнениеДокументов.ПолучитьДоговорПоОрганизацииИКонтрагенту(Объект.Организация, Объект.Контрагент,
		СтруктураПараметровДляПолученияДоговора);
КонецЕсли;

Если НЕ ЗначениеЗаполнено(Объект.ВалютаДокумента) Тогда
	Если ЗначениеЗаполнено(Объект.ДоговорКонтрагента) Тогда
		Объект.ВалютаДокумента = Объект.ДоговорКонтрагента.ВалютаВзаиморасчетов;
	Иначе
		Объект.ВалютаДокумента = глЗначениеПеременной("ВалютаРегламентированногоУчета");
	КонецЕсли;
КонецЕсли;

КурсВалюты = Параметры.Кэш.Получить(Объект.ВалютаДокумента);
Если КурсВалюты = Неопределено Тогда
	КурсВалюты = МодульВалютногоУчета.ПолучитьКурсВалюты(Объект.ВалютаДокумента, Объект.Дата);
	Параметры.Кэш.Вставить(Объект.ВалютаДокумента, КурсВалюты);
КонецЕсли;

Объект.КурсВзаиморасчетов      = КурсВалюты.Курс;
Объект.КратностьВзаиморасчетов = КурсВалюты.Кратность;

Если НЕ УчетНДС.ОрганизацияУчитываетНДС(Объект.Организация, Объект.Дата) Тогда
	Объект.НДСВключенВСтоимость = Истина;
КонецЕсли;

Параметры.Свойство("ЦенаВключаетНДС", Объект.СуммаВключаетНДС);
Если Объект.СуммаВключаетНДС Тогда

	Для Каждого СтрокаТаблицы Из Объект.Товары Цикл
		СтрокаТаблицы.Сумма = СтрокаТаблицы.Сумма + СтрокаТаблицы.СуммаНДС;
		СтрокаТаблицы.Цена  = ?(СтрокаТаблицы.Количество = 0, 0, СтрокаТаблицы.Сумма / СтрокаТаблицы.Количество);
	КонецЦикла;

	Для Каждого СтрокаТаблицы Из Объект.Услуги Цикл
		СтрокаТаблицы.Сумма = СтрокаТаблицы.Сумма + СтрокаТаблицы.СуммаНДС;
		СтрокаТаблицы.Цена  = ?(СтрокаТаблицы.Количество = 0, 0, СтрокаТаблицы.Сумма / СтрокаТаблицы.Количество);
	КонецЦикла;

КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>ДокументСсылка.ПоступлениеТоваровУслуг</Источник>
				<Приемник>ДокументСсылка.ПоступлениеТоваровУслуг</Приемник>
				<Свойства>
					<Группа>
						<Код>1</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>4</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							<ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ЭтоУслуга", Ложь);
Если ЗначениеЗаполнено(ОбъектКоллекции.НомерГТД) 
	И ЗначениеЗаполнено(ОбъектКоллекции.СтранаПроисхождения) Тогда
	ИсходящиеДанные.Вставить("УчетПоСериям", Истина);
КонецЕсли;
</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>--&gt; КодЕдиницыИзмеренияПоКлассификатору</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КодЕдиницыИзмеренияПоКлассификатору</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.КодЕдиницыИзмеренияПоКлассификатору;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>--&gt; СерияНоменклатуры</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СерияНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.СерииНоменклатуры"/>
							<КодПравилаКонвертации>СерииНоменклатуры                                 </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.НомерГТД) 
	И ЗначениеЗаполнено(ОбъектКоллекции.СтранаПроисхождения)
	И ЗначениеЗаполнено(ОбъектКоллекции.Номенклатура) Тогда
	СерияНоменклатуры = Новый Структура;
	СерияНоменклатуры.Вставить("НомерГТД", Новый Структура("Код", ОбъектКоллекции.НомерГТД));
	СерияНоменклатуры.Вставить("Владелец", ОбъектКоллекции.Номенклатура);
	СерияНоменклатуры.Вставить("СтранаПроисхождения", ОбъектКоллекции.СтранаПроисхождения);
	Значение = СерияНоменклатуры;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Группа>
						<Код>20</Код>
						<Наименование>--&gt; Услуги</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>24</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<ПередВыгрузкой>ИсходящиеДанные = Новый Структура("ЭтоУслуга", Истина);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>33</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>30</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>28</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						</Свойство>
						<Свойство>
							<Код>31</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство Поиск="true">
						<Код>16</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>17</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>34</Код>
						<Наименование>ДатаЭД --&gt; ДатаВходящегоДокумента</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ДатаЭД" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>36</Код>
						<Наименование>НомерЭД --&gt; НомерВходящегоДокумента</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="НомерЭД" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>35</Код>
						<Наименование>ДатаЭД --&gt; ДатаВходящегоДокументаЭлектронногоОбмена</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ДатаЭД" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаВходящегоДокументаЭлектронногоОбмена" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>37</Код>
						<Наименование>НомерЭД --&gt; НомерВходящегоДокументаЭлектронногоОбмена</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="НомерЭД" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерВходящегоДокументаЭлектронногоОбмена" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>38</Код>
						<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>ДоговорКонтрагента --&gt; ДоговорКонтрагента</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>40</Код>
						<Наименование>БанковскийСчетКонтрагента --&gt; БанковскийСчетКонтрагента</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<Приемник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>39</Код>
						<Наименование>--&gt; УчитыватьНДС</Наименование>
						<Порядок>900</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВозвратТоваровОтПокупателя</Код>
				<Наименование>Документ: Поступление (акты, накладные)</Наименование>
				<Порядок>100</Порядок>
				<ПослеЗагрузки>Выполнить(Алгоритмы.ЗаполнитьЕдиницыИзмерения);

Объект.ОтражатьВУправленческомУчете = Истина;
Объект.ОтражатьВБухгалтерскомУчете = Истина;

Параметры.Свойство("Склад", Объект.СкладОрдер);

Если НЕ ЗначениеЗаполнено(Объект.ДоговорКонтрагента)
	И ЗначениеЗаполнено(Объект.Организация)
	И ЗначениеЗаполнено(Объект.Контрагент) Тогда
	
	СписокДопустимыхВидовДоговоров = Новый СписокЗначений;
	СписокДопустимыхВидовДоговоров.Добавить(Перечисления.ВидыДоговоровКонтрагентов.СПокупателем);
	СтруктураПараметровДляПолученияДоговора = Новый Структура;
	СтруктураПараметровДляПолученияДоговора.Вставить("СписокДопустимыхВидовДоговоров", СписокДопустимыхВидовДоговоров);	
	Объект.ДоговорКонтрагента = ЗаполнениеДокументов.ПолучитьДоговорПоОрганизацииИКонтрагенту(Объект.Организация, Объект.Контрагент,
		СтруктураПараметровДляПолученияДоговора);
КонецЕсли;

Если НЕ ЗначениеЗаполнено(Объект.ВалютаДокумента) Тогда
	Если ЗначениеЗаполнено(Объект.ДоговорКонтрагента) Тогда
		Объект.ВалютаДокумента = Объект.ДоговорКонтрагента.ВалютаВзаиморасчетов;
	Иначе
		Объект.ВалютаДокумента = глЗначениеПеременной("ВалютаРегламентированногоУчета");
	КонецЕсли;
КонецЕсли;

КурсВалюты = Параметры.Кэш.Получить(Объект.ВалютаДокумента);
Если КурсВалюты = Неопределено Тогда
	КурсВалюты = МодульВалютногоУчета.ПолучитьКурсВалюты(Объект.ВалютаДокумента, Объект.Дата);
	Параметры.Кэш.Вставить(Объект.ВалютаДокумента, КурсВалюты);
КонецЕсли;

Объект.КурсВзаиморасчетов      = КурсВалюты.Курс;
Объект.КратностьВзаиморасчетов = КурсВалюты.Кратность;

Параметры.Свойство("ЦенаВключаетНДС", Объект.СуммаВключаетНДС);
Если Объект.СуммаВключаетНДС Тогда
	Для Каждого СтрокаТаблицы Из Объект.Товары Цикл
		СтрокаТаблицы.Сумма = СтрокаТаблицы.Сумма + СтрокаТаблицы.СуммаНДС;
		СтрокаТаблицы.Цена  = ?(СтрокаТаблицы.Количество = 0, 0, СтрокаТаблицы.Сумма / СтрокаТаблицы.Количество);
	КонецЦикла;
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>ДокументСсылка.ПоступлениеТоваровУслуг</Источник>
				<Приемник>ДокументСсылка.ВозвратТоваровОтПокупателя</Приемник>
				<Свойства>
					<Группа>
						<Код>1</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Запрос = Новый Запрос;
Запрос.Текст = 
	"ВЫБРАТЬ
	|	ПоступлениеТоваровУслугТовары.НомерСтроки КАК НомерСтроки,
	|	ПоступлениеТоваровУслугТовары.Номенклатура КАК Номенклатура,
	|	ПоступлениеТоваровУслугТовары.ЕдиницаИзмерения.Код КАК ЕдиницаИзмеренияКод,
	|	ПоступлениеТоваровУслугТовары.Количество КАК Количество,
	|	ПоступлениеТоваровУслугТовары.Цена КАК Цена,
	|	ПоступлениеТоваровУслугТовары.Сумма КАК Сумма,
	|	ПоступлениеТоваровУслугТовары.СтавкаНДС КАК СтавкаНДС,
	|	ПоступлениеТоваровУслугТовары.СуммаНДС КАК СуммаНДС,
	|	ПоступлениеТоваровУслугТовары.НомерГТД КАК НомерГТД,
	|	ПоступлениеТоваровУслугТовары.СтранаПроисхождения КАК СтранаПроисхождения
	|ИЗ
	|	Документ.ПоступлениеТоваровУслуг.Товары КАК ПоступлениеТоваровУслугТовары
	|ГДЕ
	|	ПоступлениеТоваровУслугТовары.Ссылка = &amp;Ссылка";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>4</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							<ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ЭтоУслуга", Ложь);
Если ЗначениеЗаполнено(ОбъектКоллекции.НомерГТД) 
	И ЗначениеЗаполнено(ОбъектКоллекции.СтранаПроисхождения) Тогда
	ИсходящиеДанные.Вставить("УчетПоСериям", Истина);
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>--&gt; КодЕдиницыИзмеренияПоКлассификатору</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КодЕдиницыИзмеренияПоКлассификатору</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ЕдиницаИзмеренияКод;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>--&gt; СерияНоменклатуры</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СерияНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.СерииНоменклатуры"/>
							<КодПравилаКонвертации>СерииНоменклатуры                                 </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.НомерГТД) 
	И ЗначениеЗаполнено(ОбъектКоллекции.СтранаПроисхождения)
	И ЗначениеЗаполнено(ОбъектКоллекции.Номенклатура) Тогда
	СерияНоменклатуры = Новый Структура;
	СерияНоменклатуры.Вставить("НомерГТД", Новый Структура("Код", ОбъектКоллекции.НомерГТД));
	СерияНоменклатуры.Вставить("Владелец", ОбъектКоллекции.Номенклатура);
	СерияНоменклатуры.Вставить("СтранаПроисхождения", ОбъектКоллекции.СтранаПроисхождения);
	Значение = СерияНоменклатуры;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство Поиск="true">
						<Код>13</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>14</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ДоговорКонтрагента --&gt; ДоговорКонтрагента</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>--&gt; УчитыватьНДС</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Источник.Товары.Итог("СуммаНДС") &gt; 0
	ИЛИ Источник.Товары.Найти(Перечисления.СтавкиНДС.НДС0, "СтавкаНДС") &lt;&gt; Неопределено;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КорректировкаПоступления</Код>
				<Наименование>Документ: Поступление (акты, накладные)</Наименование>
				<Порядок>150</Порядок>
				<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = 
	"ВЫБРАТЬ
	|	ПоступлениеТоваровУслугТовары.Номенклатура КАК Номенклатура,
	|	ПоступлениеТоваровУслугТовары.ЕдиницаИзмерения КАК ЕдиницаИзмерения,
	|	ПоступлениеТоваровУслугТовары.КоличествоДоКорректировки КАК КоличествоДоКорректировки,
	|	ПоступлениеТоваровУслугТовары.Количество КАК Количество,
	|	ПоступлениеТоваровУслугТовары.ЦенаДоКорректировки КАК ЦенаДоКорректировки,
	|	ПоступлениеТоваровУслугТовары.Цена КАК Цена,
	|	ПоступлениеТоваровУслугТовары.СуммаДоКорректировки КАК СуммаДоКорректировки,
	|	ПоступлениеТоваровУслугТовары.Сумма КАК Сумма,
	|	ПоступлениеТоваровУслугТовары.СтавкаНДС КАК СтавкаНДС,
	|	ПоступлениеТоваровУслугТовары.СуммаНДСДоКорректировки КАК СуммаНДСДоКорректировки,
	|	ПоступлениеТоваровУслугТовары.СуммаНДС КАК СуммаНДС,
	|	ПоступлениеТоваровУслугТовары.НомерГТД КАК НомерГТД,
	|	ПоступлениеТоваровУслугТовары.СтранаПроисхождения КАК СтранаПроисхождения
	|ПОМЕСТИТЬ ВТ_Товары
	|ИЗ
	|	Документ.ПоступлениеТоваровУслуг.Товары КАК ПоступлениеТоваровУслугТовары
	|ГДЕ
	|	ПоступлениеТоваровУслугТовары.Ссылка = &amp;Ссылка
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ВТ_Товары.Номенклатура КАК Номенклатура,
	|	ЕСТЬNULL(ЕдиницыИзмерения.Код,"""") КАК КодЕдиницыИзмеренияПоКлассификатору,
	|	ВТ_Товары.КоличествоДоКорректировки КАК КоличествоДоКорректировки,
	|	ВТ_Товары.Количество КАК Количество,
	|	ВТ_Товары.ЦенаДоКорректировки КАК ЦенаДоКорректировки,
	|	ВТ_Товары.Цена КАК Цена,
	|	ВТ_Товары.СуммаДоКорректировки КАК СуммаДоКорректировки,
	|	ВТ_Товары.Сумма КАК Сумма,
	|	ВТ_Товары.СтавкаНДС КАК СтавкаНДС,
	|	ВТ_Товары.СуммаНДСДоКорректировки КАК СуммаНДСДоКорректировки,
	|	ВТ_Товары.СуммаНДС КАК СуммаНДС,
	|	ВТ_Товары.НомерГТД КАК НомерГТД,
	|	ВТ_Товары.СтранаПроисхождения КАК СтранаПроисхождения,
	|	ЕСТЬNULL(ВидыНоменклатуры.ТипНоменклатуры,"""") КАК ТипНоменклатуры
	|ПОМЕСТИТЬ ВТ_ТоварыВидыНоменклатуры
	|ИЗ
	|	ВТ_Товары КАК ВТ_Товары
	|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Номенклатура КАК ТаблицаНоменклатуры
	|		ПО ВТ_Товары.Номенклатура = ТаблицаНоменклатуры.Ссылка
	|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ВидыНоменклатуры КАК ВидыНоменклатуры
	|		ПО (ТаблицаНоменклатуры.ВидНоменклатуры = ВидыНоменклатуры.Ссылка)
	|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ЕдиницыИзмерения КАК ЕдиницыИзмерения
	|		ПО (ВТ_Товары.ЕдиницаИзмерения = ЕдиницыИзмерения.Ссылка)
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ВТ_ТоварыВидыНоменклатуры.Номенклатура КАК Номенклатура,
	|	ВТ_ТоварыВидыНоменклатуры.КодЕдиницыИзмеренияПоКлассификатору КАК КодЕдиницыИзмеренияПоКлассификатору,
	|	ВТ_ТоварыВидыНоменклатуры.КоличествоДоКорректировки КАК КоличествоДоКорректировки,
	|	ВТ_ТоварыВидыНоменклатуры.Количество КАК Количество,
	|	ВТ_ТоварыВидыНоменклатуры.ЦенаДоКорректировки КАК ЦенаДоКорректировки,
	|	ВТ_ТоварыВидыНоменклатуры.Цена КАК Цена,
	|	ВТ_ТоварыВидыНоменклатуры.СуммаДоКорректировки КАК СуммаДоКорректировки,
	|	ВТ_ТоварыВидыНоменклатуры.Сумма КАК Сумма,
	|	ВТ_ТоварыВидыНоменклатуры.СтавкаНДС КАК СтавкаНДС,
	|	ВТ_ТоварыВидыНоменклатуры.СуммаНДСДоКорректировки КАК СуммаНДСДоКорректировки,
	|	ВТ_ТоварыВидыНоменклатуры.СуммаНДС КАК СуммаНДС,
	|	ВТ_ТоварыВидыНоменклатуры.НомерГТД КАК НомерГТД,
	|	ВТ_ТоварыВидыНоменклатуры.СтранаПроисхождения КАК СтранаПроисхождения
	|ИЗ
	|	ВТ_ТоварыВидыНоменклатуры КАК ВТ_ТоварыВидыНоменклатуры
	|ГДЕ
	|	(ВТ_ТоварыВидыНоменклатуры.ТипНоменклатуры &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Работа)
	|			ИЛИ ВТ_ТоварыВидыНоменклатуры.ТипНоменклатуры &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
	|			ИЛИ ВТ_ТоварыВидыНоменклатуры.ТипНоменклатуры &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Право))
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ВТ_ТоварыВидыНоменклатуры.Номенклатура,
	|	ВТ_ТоварыВидыНоменклатуры.КодЕдиницыИзмеренияПоКлассификатору,
	|	ВТ_ТоварыВидыНоменклатуры.КоличествоДоКорректировки,
	|	ВТ_ТоварыВидыНоменклатуры.Количество,
	|	ВТ_ТоварыВидыНоменклатуры.ЦенаДоКорректировки,
	|	ВТ_ТоварыВидыНоменклатуры.Цена,
	|	ВТ_ТоварыВидыНоменклатуры.СуммаДоКорректировки,
	|	ВТ_ТоварыВидыНоменклатуры.Сумма,
	|	ВТ_ТоварыВидыНоменклатуры.СтавкаНДС,
	|	ВТ_ТоварыВидыНоменклатуры.СуммаНДСДоКорректировки,
	|	ВТ_ТоварыВидыНоменклатуры.СуммаНДС,
	|	NULL
	|ИЗ
	|	ВТ_ТоварыВидыНоменклатуры КАК ВТ_ТоварыВидыНоменклатуры
	|ГДЕ
	|	(ВТ_ТоварыВидыНоменклатуры.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Работа)
	|			ИЛИ ВТ_ТоварыВидыНоменклатуры.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Услуга)
	|			ИЛИ ВТ_ТоварыВидыНоменклатуры.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Право))
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ВТ_Товары.Номенклатура КАК Номенклатура
	|ИЗ
	|	ВТ_Товары КАК ВТ_Товары
	|ГДЕ
	|	(ВТ_Товары.СуммаНДС &gt; 0
	|			ИЛИ ВТ_Товары.СтавкаНДС = ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.НДС0))";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

РезультатыЗапроса = Запрос.ВыполнитьПакет();

ВходящиеДанные = Новый Структура;
ВходящиеДанные.Вставить("Товары", РезультатыЗапроса[2].Выгрузить());
ВходящиеДанные.Вставить("Услуги", РезультатыЗапроса[3].Выгрузить());
ВходящиеДанные.Вставить("УчитыватьНДС", НЕ РезультатыЗапроса[4].Пустой());</ПередВыгрузкой>
				<ПослеЗагрузки>Выполнить(Алгоритмы.ЗаполнитьЕдиницыИзмерения);

СогласованноеИзменение = Объект.ВидОперации = Перечисления.ВидыОперацийИсправленияПоступленияРеализации.СогласованноеИзменение;
ИсправлениеКорректировки = Ложь;

ЗаполненоПоОснованию = Ложь;
Если ЗначениеЗаполнено(Объект.ДокументПоступления) Тогда
	
	ДанныеПоОснованию = Документы.КорректировкаПоступления.СоздатьДокумент();
	Попытка
		ДанныеПоОснованию.Заполнить(Объект.ДокументПоступления);
		ЗаполненоПоОснованию = Истина;
	Исключение
		ЗаписьЖурналаРегистрации(НСтр("ru = 'Загрузка данных из Клиента ЭДО'"),
			УровеньЖурналаРегистрации.Ошибка,,,ПодробноеПредставлениеОшибки(ИнформацияОбОшибке()));
	КонецПопытки;
	
	Если ЗаполненоПоОснованию Тогда
		
		Объект.ИсправляемыйДокументПоступления = ДанныеПоОснованию.ИсправляемыйДокументПоступления;
		
		Объект.ВалютаДокумента = ДанныеПоОснованию.ВалютаДокумента;
		Объект.КурсВзаиморасчетов = ДанныеПоОснованию.КурсВзаиморасчетов;
		Объект.КратностьВзаиморасчетов = ДанныеПоОснованию.КратностьВзаиморасчетов;
		
		Объект.ОтражатьВУправленческомУчете = ДанныеПоОснованию.ОтражатьВУправленческомУчете;
		Объект.ОтражатьВБухгалтерскомУчете  = ДанныеПоОснованию.ОтражатьВБухгалтерскомУчете;
		Объект.ОтражатьВНалоговомУчете      = ДанныеПоОснованию.ОтражатьВНалоговомУчете;
		
		Объект.КорректироватьНДС    = ДанныеПоОснованию.КорректироватьНДС;
		Объект.КорректироватьБУиНУ  = ДанныеПоОснованию.КорректироватьБУиНУ;
		Объект.НДСВключенВСтоимость = ДанныеПоОснованию.НДСВключенВСтоимость;
		Объект.СуммаВключаетНДС     = ДанныеПоОснованию.СуммаВключаетНДС;
		
		Объект.СкладОрдер = ДанныеПоОснованию.СкладОрдер;
		Объект.ВидПоступления = ДанныеПоОснованию.ВидПоступления;
		Объект.ДоговорКонтрагента = ДанныеПоОснованию.ДоговорКонтрагента;
		
		ИсправлениеКорректировки = НЕ СогласованноеИзменение
			И ЗначениеЗаполнено(Объект.ИсправляемыйДокументПоступления) 
			И (ТипЗнч(Объект.ИсправляемыйДокументПоступления) = Тип("ДокументСсылка.КорректировкаПоступления")) 
			И (Объект.ИсправляемыйДокументПоступления.ВидОперации = Перечисления.ВидыОперацийИсправленияПоступленияРеализации.СогласованноеИзменение);
		
	КонецЕсли;
	
КонецЕсли;

Если НЕ ЗаполненоПоОснованию Тогда
		
	Объект.ОтражатьВУправленческомУчете = Истина;
	Объект.ОтражатьВБухгалтерскомУчете = Истина;
	Объект.ОтражатьВНалоговомУчете = Истина;

	Объект.КорректироватьНДС = Истина;
	
	Параметры.Свойство("Склад",           Объект.СкладОрдер); 
	Параметры.Свойство("ЦенаВключаетНДС", Объект.СуммаВключаетНДС);
	
	Объект.ВидПоступления = Перечисления.ВидыПоступленияТоваров.НаСклад;
	
	Если НЕ ЗначениеЗаполнено(Объект.ДоговорКонтрагента)
		И ЗначениеЗаполнено(Объект.Организация)
		И ЗначениеЗаполнено(Объект.Контрагент) Тогда
		
		СписокДопустимыхВидовДоговоров = Новый СписокЗначений;
		СписокДопустимыхВидовДоговоров.Добавить(Перечисления.ВидыДоговоровКонтрагентов.СПоставщиком);
		СтруктураПараметровДляПолученияДоговора = Новый Структура;
		СтруктураПараметровДляПолученияДоговора.Вставить("СписокДопустимыхВидовДоговоров", СписокДопустимыхВидовДоговоров);	
		Объект.ДоговорКонтрагента = ЗаполнениеДокументов.ПолучитьДоговорПоОрганизацииИКонтрагенту(Объект.Организация, Объект.Контрагент,
			СтруктураПараметровДляПолученияДоговора);
	КонецЕсли;
	
	Если НЕ ЗначениеЗаполнено(Объект.ВалютаДокумента) Тогда
		Если ЗначениеЗаполнено(Объект.ДоговорКонтрагента) Тогда
			Объект.ВалютаДокумента = Объект.ДоговорКонтрагента.ВалютаВзаиморасчетов;
		Иначе
			Объект.ВалютаДокумента = глЗначениеПеременной("ВалютаРегламентированногоУчета");
		КонецЕсли;
	КонецЕсли;

	КурсВалюты = Параметры.Кэш.Получить(Объект.ВалютаДокумента);
	Если КурсВалюты = Неопределено Тогда
		КурсВалюты = МодульВалютногоУчета.ПолучитьКурсВалюты(Объект.ВалютаДокумента, Объект.Дата);
		Параметры.Кэш.Вставить(Объект.ВалютаДокумента, КурсВалюты);
	КонецЕсли;

	Объект.КурсВзаиморасчетов      = КурсВалюты.Курс;
	Объект.КратностьВзаиморасчетов = КурсВалюты.Кратность;	

КонецЕсли;

Склад = Объект.СкладОрдер;
ЦенаВключаетНДС = Объект.СуммаВключаетНДС;

НезаполняемыеРеквизиты = "Номенклатура, СерияНоменклатуры, ЕдиницаИзмерения, Количество, Цена, Сумма, СтавкаНДС, СуммаНДС,
	|КоличествоДоКорректировки, ЦенаДоКорректировки, СуммаДоКорректировки, СуммаНДСДоКорректировки";

Для Каждого СтрокаТаблицы Из Объект.Товары Цикл
	
	СтрокаТаблицы.Склад = Склад;
	
	Если ЦенаВключаетНДС Тогда
		СтрокаТаблицы.СуммаДоКорректировки = СтрокаТаблицы.СуммаДоКорректировки + СтрокаТаблицы.СуммаНДСДоКорректировки;
		СтрокаТаблицы.ЦенаДоКорректировки  = ?(СтрокаТаблицы.КоличествоДоКорректировки = 0, 0,
			СтрокаТаблицы.СуммаДоКорректировки / СтрокаТаблицы.КоличествоДоКорректировки);
		СтрокаТаблицы.Сумма = СтрокаТаблицы.Сумма + СтрокаТаблицы.СуммаНДС;
		СтрокаТаблицы.Цена  = ?(СтрокаТаблицы.Количество = 0, 0, СтрокаТаблицы.Сумма / СтрокаТаблицы.Количество);
	КонецЕсли;
	
	Если ЗаполненоПоОснованию И ЗначениеЗаполнено(СтрокаТаблицы.Номенклатура) Тогда
		ПараметрыОтбора = Новый Структура();
		ПараметрыОтбора.Вставить("Номенклатура", СтрокаТаблицы.Номенклатура);
		ПараметрыОтбора.Вставить("СерияНоменклатуры", СтрокаТаблицы.СерияНоменклатуры);
		ПараметрыОтбора.Вставить("ЕдиницаИзмерения", СтрокаТаблицы.ЕдиницаИзмерения);
		Если СогласованноеИзменение Тогда
			ПараметрыОтбора.Вставить("КоличествоДоИзменения", СтрокаТаблицы.КоличествоДоКорректировки);
			ПараметрыОтбора.Вставить("ЦенаДоИзменения", СтрокаТаблицы.ЦенаДоКорректировки);
			ПараметрыОтбора.Вставить("СтавкаНДС", СтрокаТаблицы.СтавкаНДС);
		ИначеЕсли ИсправлениеКорректировки Тогда
			ПараметрыОтбора.Вставить("КоличествоДоКорректировки", СтрокаТаблицы.КоличествоДоКорректировки);
			ПараметрыОтбора.Вставить("ЦенаДоКорректировки", СтрокаТаблицы.ЦенаДоКорректировки);
			ПараметрыОтбора.Вставить("СтавкаНДС", СтрокаТаблицы.СтавкаНДС);
		КонецЕсли;
		НайденныеСтроки = ДанныеПоОснованию.Товары.НайтиСтроки(ПараметрыОтбора);
		Если НайденныеСтроки.Количество() Тогда
			НайденнаяСтрока = НайденныеСтроки[0]; 
			ЗаполнитьЗначенияСвойств(СтрокаТаблицы, НайденнаяСтрока,, НезаполняемыеРеквизиты);
			ДанныеПоОснованию.Товары.Удалить(НайденнаяСтрока);
		КонецЕсли;
	КонецЕсли;
	
КонецЦикла;

НезаполняемыеРеквизиты = "Номенклатура, Количество, Цена, Сумма, СтавкаНДС, СуммаНДС,
	|КоличествоДоКорректировки, ЦенаДоКорректировки, СуммаДоКорректировки, СуммаНДСДоКорректировки";

Для Каждого СтрокаТаблицы Из Объект.Услуги Цикл
	
	Если ЦенаВключаетНДС Тогда
		СтрокаТаблицы.СуммаДоКорректировки = СтрокаТаблицы.СуммаДоКорректировки + СтрокаТаблицы.СуммаНДСДоКорректировки;
		СтрокаТаблицы.ЦенаДоКорректировки  = ?(СтрокаТаблицы.КоличествоДоКорректировки = 0, 0,
			СтрокаТаблицы.СуммаДоКорректировки / СтрокаТаблицы.КоличествоДоКорректировки);
		СтрокаТаблицы.Сумма = СтрокаТаблицы.Сумма + СтрокаТаблицы.СуммаНДС;
		СтрокаТаблицы.Цена  = ?(СтрокаТаблицы.Количество = 0, 0, СтрокаТаблицы.Сумма / СтрокаТаблицы.Количество);
	КонецЕсли;
	
	Если ЗаполненоПоОснованию И ЗначениеЗаполнено(СтрокаТаблицы.Номенклатура) Тогда
		ПараметрыОтбора = Новый Структура();
		ПараметрыОтбора.Вставить("Номенклатура", СтрокаТаблицы.Номенклатура);
		Если СогласованноеИзменение Тогда
			ПараметрыОтбора.Вставить("КоличествоДоИзменения", СтрокаТаблицы.КоличествоДоКорректировки);
			ПараметрыОтбора.Вставить("ЦенаДоИзменения", СтрокаТаблицы.ЦенаДоКорректировки);
			ПараметрыОтбора.Вставить("СтавкаНДС", СтрокаТаблицы.СтавкаНДС);
		ИначеЕсли ИсправлениеКорректировки Тогда
			ПараметрыОтбора.Вставить("КоличествоДоКорректировки", СтрокаТаблицы.КоличествоДоКорректировки);
			ПараметрыОтбора.Вставить("ЦенаДоКорректировки", СтрокаТаблицы.ЦенаДоКорректировки);
			ПараметрыОтбора.Вставить("СтавкаНДС", СтрокаТаблицы.СтавкаНДС);
		КонецЕсли;
		НайденныеСтроки = ДанныеПоОснованию.Услуги.НайтиСтроки(ПараметрыОтбора);
		Если НайденныеСтроки.Количество() Тогда
			НайденнаяСтрока = НайденныеСтроки[0]; 
			ЗаполнитьЗначенияСвойств(СтрокаТаблицы, НайденнаяСтрока,, НезаполняемыеРеквизиты);
			ДанныеПоОснованию.Услуги.Удалить(НайденнаяСтрока);
		КонецЕсли;
	КонецЕсли;
	
КонецЦикла;

Если ЗаполненоПоОснованию Тогда
	
	НезаполняемыеРеквизиты = "Количество, Цена, Сумма, СуммаНДС";

	Для Каждого СтрокаТаблицы Из ДанныеПоОснованию.Товары Цикл
		НоваяСтрока = Объект.Товары.Добавить();
		ЗаполнитьЗначенияСвойств(НоваяСтрока, СтрокаТаблицы,, НезаполняемыеРеквизиты);
	КонецЦикла;

	Для Каждого СтрокаТаблицы Из ДанныеПоОснованию.Услуги Цикл
		НоваяСтрока = Объект.Услуги.Добавить();
		ЗаполнитьЗначенияСвойств(НоваяСтрока, СтрокаТаблицы,, НезаполняемыеРеквизиты);
	КонецЦикла;
	
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>ДокументСсылка.ПоступлениеТоваровУслуг</Источник>
				<Приемник>ДокументСсылка.КорректировкаПоступления</Приемник>
				<Свойства>
					<Группа>
						<Код>1</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>5</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							<ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("ЭтоУслуга", Ложь);
Если ЗначениеЗаполнено(ОбъектКоллекции.НомерГТД) 
	И ЗначениеЗаполнено(ОбъектКоллекции.СтранаПроисхождения) Тогда
	ИсходящиеДанные.Вставить("УчетПоСериям", Истина);
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>--&gt; КодЕдиницыИзмеренияПоКлассификатору</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КодЕдиницыИзмеренияПоКлассификатору</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.КодЕдиницыИзмеренияПоКлассификатору;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>--&gt; КоличествоДоКорректировки</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КоличествоДоКорректировки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; ЦенаДоКорректировки</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЦенаДоКорректировки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>--&gt; СуммаДоКорректировки</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаДоКорректировки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>--&gt; СуммаНДСДоКорректировки</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДСДоКорректировки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>57</Код>
							<Наименование>--&gt; СерияНоменклатуры</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СерияНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.СерииНоменклатуры"/>
							<КодПравилаКонвертации>СерииНоменклатуры                                 </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(ОбъектКоллекции.НомерГТД) 
	И ЗначениеЗаполнено(ОбъектКоллекции.СтранаПроисхождения)
	И ЗначениеЗаполнено(ОбъектКоллекции.Номенклатура) Тогда
	СерияНоменклатуры = Новый Структура;
	СерияНоменклатуры.Вставить("НомерГТД", Новый Структура("Код", ОбъектКоллекции.НомерГТД));
	СерияНоменклатуры.Вставить("Владелец", ОбъектКоллекции.Номенклатура);
	СерияНоменклатуры.Вставить("СтранаПроисхождения", ОбъектКоллекции.СтранаПроисхождения);
	Значение = СерияНоменклатуры;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Группа>
						<Код>23</Код>
						<Наименование>--&gt; Услуги</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Услуги" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>30</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<ПередВыгрузкой>ИсходящиеДанные = Новый Структура("ЭтоУслуга", Истина);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>29</Код>
							<Наименование>--&gt; КоличествоДоКорректировки</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КоличествоДоКорректировки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>48</Код>
							<Наименование>--&gt; ЦенаДоКорректировки</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЦенаДоКорректировки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>46</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>--&gt; СуммаДоКорректировки</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаДоКорректировки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>36</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						</Свойство>
						<Свойство>
							<Код>44</Код>
							<Наименование>--&gt; СуммаНДСДоКорректировки</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДСДоКорректировки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>42</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство Поиск="true">
						<Код>20</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>21</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>49</Код>
						<Наименование>ДатаЭД --&gt; ДатаВходящегоДокумента</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ДатаЭД" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>51</Код>
						<Наименование>НомерЭД --&gt; НомерВходящегоДокумента</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="НомерЭД" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>50</Код>
						<Наименование>ДатаЭД --&gt; ДатаВходящегоДокументаЭлектронногоОбмена</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ДатаЭД" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаВходящегоДокументаЭлектронногоОбмена" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>52</Код>
						<Наименование>НомерЭД --&gt; НомерВходящегоДокументаЭлектронногоОбмена</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="НомерЭД" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерВходящегоДокументаЭлектронногоОбмена" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийИсправленияПоступленияРеализации"/>
						<ПередВыгрузкой>Если Источник.ВидОперации = Перечисления.ВидыОпераций.Исправление Тогда
	Значение = "ИсправлениеОшибки";
Иначе
	Значение = "СогласованноеИзменение";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>54</Код>
						<Наименование>ДокументОснование --&gt; ДокументПоступления</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит" Тип="ДокументСсылка.ПоступлениеТоваровУслуг"/>
						<Приемник Имя="ДокументПоступления" Вид="Реквизит"/>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.ДокументОснование) Тогда
	ВидОперацииОснования = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Источник.ДокументОснование ,"ВидОперации");
	Если ВидОперацииОснования = Перечисления.ВидыОпераций.Реализация Тогда
		ИмяПКО = "ПоступлениеТоваровУслуг";
	Иначе
		ИмяПКО = "КорректировкаПоступления";
	КонецЕсли;
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>53</Код>
						<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>ДоговорКонтрагента --&gt; ДоговорКонтрагента</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>56</Код>
						<Наименование>БанковскийСчетКонтрагента --&gt; БанковскийСчетКонтрагента</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<Приемник Имя="БанковскийСчетКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
						<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>55</Код>
						<Наименование>--&gt; УчитыватьНДС</Наименование>
						<Порядок>950</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="УчитыватьНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>1000</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СчетФактураПолученный</Код>
				<Наименование>Документ: Счет-фактура полученный</Наименование>
				<Порядок>200</Порядок>
				<ПередВыгрузкой>ВходящиеДанные = Новый Структура;
ВходящиеДанные.Вставить("СуммаУвеличение", 0);
ВходящиеДанные.Вставить("СуммаУменьшение", 0);
ВходящиеДанные.Вставить("СуммаНДСДокумента",  0);
ВходящиеДанные.Вставить("СуммаНДСУвеличение", 0);
ВходящиеДанные.Вставить("СуммаНДСУменьшение", 0);
ВходящиеДанные.Вставить("ВидСчетаФактуры", "НаПоступление");
ВходящиеДанные.Вставить("СуммаДокумента", Источник.СуммаДокумента);

Корректировочный = Источник.ВидОперации = Перечисления.ВидыОпераций.Корректировка
	ИЛИ (Источник.ВидОперации = Перечисления.ВидыОпераций.Исправление
		И ЗначениеЗаполнено(Источник.НомерИсправляемогоКорректировочногоДокумента));
		
ВходящиеДанные.Вставить("СводныйКорректировочный", Корректировочный И Источник.ДокументыОснования.Количество() &gt; 1);

Если Источник.ДокументыОснования.Количество() Тогда

	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	ПоступлениеТоваровУслуг.Ссылка КАК ДокументОснование,
		|	ПоступлениеТоваровУслуг.ВидДокумента КАК ВидДокумента,
		|	ПоступлениеТоваровУслуг.ВидОперации КАК ВидОперации
		|ПОМЕСТИТЬ ВТ_ДокументыОснования
		|ИЗ
		|	Документ.ПоступлениеТоваровУслуг КАК ПоступлениеТоваровУслуг
		|ГДЕ
		|	ПоступлениеТоваровУслуг.Ссылка В(&amp;МассивОснований)
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	ВТ_ДокументыОснования.ДокументОснование КАК ДокументОснование,
		|	ВТ_ДокументыОснования.ВидДокумента КАК ВидДокумента,
		|	ВТ_ДокументыОснования.ВидОперации КАК ВидОперации,
		|	ПоступлениеТоваровУслугТовары.СуммаСНДС КАК СуммаСНДС,
		|	ПоступлениеТоваровУслугТовары.СуммаСНДСДоКорректировки КАК СуммаСНДСДоКорректировки,
		|	ПоступлениеТоваровУслугТовары.СуммаНДС КАК СуммаНДС,
		|	ПоступлениеТоваровУслугТовары.СуммаНДСДоКорректировки КАК СуммаНДСДоКорректировки
		|ИЗ
		|	ВТ_ДокументыОснования КАК ВТ_ДокументыОснования
		|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.ПоступлениеТоваровУслуг.Товары КАК ПоступлениеТоваровУслугТовары
		|		ПО ВТ_ДокументыОснования.ДокументОснование = ПоступлениеТоваровУслугТовары.Ссылка
		|ИТОГИ ПО
		|	ДокументОснование";

	Запрос.УстановитьПараметр("МассивОснований", Источник.ДокументыОснования.ВыгрузитьКолонку("ДокументОснование"));

	ТаблицаОснований = Новый ТаблицаЗначений;
	ТаблицаОснований.Колонки.Добавить("ИмяПКО");
	ТаблицаОснований.Колонки.Добавить("ДокументОснование");
	ТаблицаОснований.Колонки.Добавить("НомерИсходногоДокумента");
	ТаблицаОснований.Колонки.Добавить("ДатаИсходногоДокумента");
	ТаблицаОснований.Колонки.Добавить("НомерИсправленияИсходногоДокумента");
	ТаблицаОснований.Колонки.Добавить("ДатаИсправленияИсходногоДокумента");
	ТаблицаОснований.Колонки.Добавить("СуммаУвеличение");
	ТаблицаОснований.Колонки.Добавить("СуммаУменьшение");
	ТаблицаОснований.Колонки.Добавить("СуммаНДСУвеличение");
	ТаблицаОснований.Колонки.Добавить("СуммаНДСУменьшение");

	ВыборкаОснований = Запрос.Выполнить().Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	Пока ВыборкаОснований.Следующий() Цикл
		
		ВидДокумента = Неопределено;
		ВидОперации  = Неопределено;
		СуммаУвеличение = 0;
		СуммаУменьшение = 0;
		СуммаНДСУвеличение = 0;
		СуммаНДСУменьшение = 0;
		
		ВыборкаТоваров = ВыборкаОснований.Выбрать();
		Пока ВыборкаТоваров.Следующий() Цикл
			ВидДокумента = ВыборкаТоваров.ВидДокумента;
			ВидОперации  = ВыборкаТоваров.ВидОперации;
			ВходящиеДанные.СуммаНДСДокумента = ВходящиеДанные.СуммаНДСДокумента + ВыборкаТоваров.СуммаНДС; 
			Если Корректировочный Тогда
				СуммаУвеличение = СуммаУвеличение
					+ Макс(ВыборкаТоваров.СуммаСНДС - ВыборкаТоваров.СуммаСНДСДоКорректировки, 0);
				СуммаУменьшение = СуммаУменьшение
					+ Макс(ВыборкаТоваров.СуммаСНДСДоКорректировки - ВыборкаТоваров.СуммаСНДС, 0);
				
				СуммаНДСУвеличение = СуммаНДСУвеличение
					+ Макс(ВыборкаТоваров.СуммаНДС - ВыборкаТоваров.СуммаНДСДоКорректировки, 0);
				СуммаНДСУменьшение = СуммаНДСУменьшение
					+ Макс(ВыборкаТоваров.СуммаНДСДоКорректировки - ВыборкаТоваров.СуммаНДС, 0);
			КонецЕсли;
		КонецЦикла;
		
		СтрокаТаблицы = ТаблицаОснований.Добавить();
		СтрокаТаблицы.ДокументОснование = ВыборкаОснований.ДокументОснование;
		Если ВидДокумента = Перечисления.ВидыДокументов.НакладнаяНаВозврат Тогда
			СтрокаТаблицы.ИмяПКО = "ВозвратТоваровОтПокупателя";
			Если ВидОперации &lt;&gt; Перечисления.ВидыОпераций.Реализация Тогда
				СтрокаТаблицы.ИмяПКО = "";
			КонецЕсли;
		ИначеЕсли ВидОперации &lt;&gt; Перечисления.ВидыОпераций.Реализация Тогда
			СтрокаТаблицы.ИмяПКО = "КорректировкаПоступления";
		Иначе
			СтрокаТаблицы.ИмяПКО = "ПоступлениеТоваровУслуг";
		КонецЕсли;
		
		Если Корректировочный Тогда
			
			СтрокаТаблицы.НомерИсходногоДокумента = Источник.НомерИсходногоДокумента;
			СтрокаТаблицы.ДатаИсходногоДокумента  = Источник.ДатаИсходногоДокумента;
			СтрокаТаблицы.НомерИсправленияИсходногоДокумента = Источник.НомерИсправленияИсходногоДокумента;
			СтрокаТаблицы.ДатаИсправленияИсходногоДокумента  = Источник.ДатаИсправленияИсходногоДокумента;
			
			СтрокаТаблицы.СуммаУвеличение    = СуммаУвеличение;
			СтрокаТаблицы.СуммаУменьшение    = СуммаУменьшение;
			СтрокаТаблицы.СуммаНДСУвеличение = СуммаНДСУвеличение;
			СтрокаТаблицы.СуммаНДСУменьшение = СуммаНДСУменьшение;
			
			ВходящиеДанные.СуммаУвеличение = ВходящиеДанные.СуммаУвеличение + СуммаУвеличение;
			ВходящиеДанные.СуммаУменьшение = ВходящиеДанные.СуммаУменьшение + СуммаУменьшение;
			ВходящиеДанные.СуммаНДСУвеличение = ВходящиеДанные.СуммаНДСУвеличение + СуммаНДСУвеличение;
			ВходящиеДанные.СуммаНДСУменьшение = ВходящиеДанные.СуммаНДСУменьшение + СуммаНДСУменьшение;
			
		КонецЕсли;
		
	КонецЦикла;

	ВходящиеДанные.Вставить("ДокументыОснования", ТаблицаОснований);

Иначе
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	СчетФактураПолученныйТовары.Сумма,
		|	СчетФактураПолученныйТовары.СуммаДоКорректировки,
		|	СчетФактураПолученныйТовары.СуммаНДС,
		|	СчетФактураПолученныйТовары.СуммаНДСДоКорректировки
		|ИЗ
		|	Документ.СчетФактураПолученный.Товары КАК СчетФактураПолученныйТовары
		|ГДЕ
		|	СчетФактураПолученныйТовары.Ссылка = &amp;Ссылка";

	Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
	
	Выборка = Запрос.Выполнить().Выбрать();
	Пока Выборка.Следующий() Цикл
		ВходящиеДанные.СуммаНДСДокумента = ВходящиеДанные.СуммаНДСДокумента + Выборка.СуммаНДС; 
		Если Корректировочный Тогда
			ВходящиеДанные.СуммаУвеличение = ВходящиеДанные.СуммаУвеличение 
				+ Макс(Выборка.Сумма - Выборка.СуммаДоКорректировки, 0);
			ВходящиеДанные.СуммаУменьшение = ВходящиеДанные.СуммаУменьшение
				+ Макс(Выборка.СуммаДоКорректировки - Выборка.Сумма, 0);
				
			ВходящиеДанные.СуммаНДСУвеличение = ВходящиеДанные.СуммаНДСУвеличение
				+ Макс(Выборка.СуммаНДС - Выборка.СуммаНДСДоКорректировки, 0);
			ВходящиеДанные.СуммаНДСУменьшение = ВходящиеДанные.СуммаНДСУменьшение
				+ Макс(Выборка.СуммаНДСДоКорректировки - Выборка.СуммаНДС, 0);
		КонецЕсли;
	КонецЦикла;
	
КонецЕсли;

Если Источник.ВидДокумента = Перечисления.ВидыДокументов.СчетФактураНаАванс Тогда
	ВходящиеДанные.ВидСчетаФактуры = "НаАванс";
ИначеЕсли Корректировочный Тогда
	ВходящиеДанные.ВидСчетаФактуры = "Корректировочный";
	ВходящиеДанные.СуммаДокумента    = ВходящиеДанные.СуммаУвеличение - ВходящиеДанные.СуммаУменьшение;
	ВходящиеДанные.СуммаНДСДокумента = ВходящиеДанные.СуммаНДСУвеличение - ВходящиеДанные.СуммаНДСУменьшение;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>Объект.Исправление = ЗначениеЗаполнено(Объект.НомерИсправления);
Объект.КодСпособаПолучения = 2;
Объект.УстановитьКодВидаОперации();

Если НЕ ЗначениеЗаполнено(Объект.ДоговорКонтрагента)
	И ЗначениеЗаполнено(Объект.ДокументОснование) Тогда
	Объект.ДоговорКонтрагента = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Объект.ДокументОснование, "ДоговорКонтрагента");
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>ДокументСсылка.СчетФактураПолученный</Источник>
				<Приемник>ДокументСсылка.СчетФактураПолученный</Приемник>
				<Свойства>
					<Группа>
						<Код>1</Код>
						<Наименование>--&gt; ДокументыОснования</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДокументыОснования" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Отказ = НЕ ВходящиеДанные.Свойство("ДокументыОснования", КоллекцияОбъектов);</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>2</Код>
							<Наименование>--&gt; ДокументОснование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
							<ПередВыгрузкой>Если ПустаяСтрока(ОбъектКоллекции.ИмяПКО) Тогда
	Отказ = Истина;
Иначе
	ИмяПКО = ОбъектКоллекции.ИмяПКО;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>33</Код>
							<Наименование>--&gt; НомерИсходногоДокумента</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерИсходногоДокумента" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>31</Код>
							<Наименование>--&gt; ДатаИсходногоДокумента</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДатаИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>--&gt; НомерИсправленияИсходногоДокумента</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>30</Код>
							<Наименование>--&gt; ДатаИсправленияИсходногоДокумента</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДатаИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>37</Код>
							<Наименование>--&gt; СуммаНДСУвеличение</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДСУвеличение" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование>--&gt; СуммаНДСУменьшение</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДСУменьшение" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование>--&gt; СуммаУвеличение</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаУвеличение" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>40</Код>
							<Наименование>--&gt; СуммаУменьшение</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаУменьшение" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>--&gt; УчитыватьИсправлениеИсходногоДокумента</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="УчитыватьИсправлениеИсходногоДокумента" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = ЗначениеЗаполнено(ОбъектКоллекции.НомерИсправленияИсходногоДокумента);</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Группа>
						<Код>25</Код>
						<Наименование>Товары --&gt; Авансы</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Авансы" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>27</Код>
							<Наименование>СуммаСНДС --&gt; Сумма</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						</Свойство>
						<Свойство>
							<Код>28</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство Поиск="true">
						<Код>10</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>11</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>ДатаЭД --&gt; ДатаВходящегоДокумента</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ДатаЭД" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>НомерЭД --&gt; НомерВходящегоДокумента</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="НомерЭД" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>ДатаЭД --&gt; ДатаВходящегоДокументаЭлектронногоОбмена</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ДатаЭД" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаВходящегоДокументаЭлектронногоОбмена" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>НомерЭД --&gt; НомерВходящегоДокументаЭлектронногоОбмена</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="НомерЭД" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерВходящегоДокументаЭлектронногоОбмена" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>НомерИсправления --&gt; НомерИсправления</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="НомерИсправления" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="НомерИсправления" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>34</Код>
						<Наименование>ДатаЭД --&gt; ДатаИсправления</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ДатаЭД" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаИсправления" Вид="Реквизит" Тип="Дата"/>
						<ПередВыгрузкой>Если НЕ ЗначениеЗаполнено(Источник.НомерИсправления) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ДатаИсходногоДокумента --&gt; ДатаИсходногоДокумента</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ДатаИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>НомерИсходногоДокумента --&gt; НомерИсходногоДокумента</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="НомерИсходногоДокумента" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерИсходногоДокумента" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ДоговорКонтрагента --&gt; ДоговорКонтрагента</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>29</Код>
						<Наименование>--&gt; ВидСчетаФактуры</Наименование>
						<Порядок>850</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидСчетаФактуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидСчетаФактурыПолученного"/>
					</Свойство>
					<Свойство>
						<Код>36</Код>
						<Наименование>--&gt; СуммаДокумента</Наименование>
						<Порядок>900</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование>--&gt; СуммаУвеличение</Наименование>
						<Порядок>950</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаУвеличение" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>24</Код>
						<Наименование>--&gt; СуммаУменьшение</Наименование>
						<Порядок>1000</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаУменьшение" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование>--&gt; СуммаНДСДокумента</Наименование>
						<Порядок>1050</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаНДСДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование>--&gt; СуммаНДСУвеличение</Наименование>
						<Порядок>1100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаНДСУвеличение" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование>--&gt; СуммаНДСУменьшение</Наименование>
						<Порядок>1150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СуммаНДСУменьшение" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>--&gt; СводныйКорректировочный</Наименование>
						<Порядок>1200</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СводныйКорректировочный" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>--&gt; ДокументОснование</Наименование>
						<Порядок>1250</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
						<ПередВыгрузкой>ДокументыОснования = Неопределено;
Если ВходящиеДанные.Свойство("ДокументыОснования", ДокументыОснования)
	И ДокументыОснования.Количество() &gt; 0
	И ЗначениеЗаполнено(ДокументыОснования[0].ИмяПКО) Тогда
	Значение = ДокументыОснования[0].ДокументОснование;
	ИмяПКО = ДокументыОснования[0].ИмяПКО;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>35</Код>
						<Наименование>СчетФактураОснование --&gt; ИсправляемыйСчетФактура</Наименование>
						<Порядок>1300</Порядок>
						<Источник Имя="СчетФактураОснование" Вид="Реквизит" Тип="ДокументСсылка.СчетФактураПолученный"/>
						<Приемник Имя="ИсправляемыйСчетФактура" Вид="Реквизит" Тип="ДокументСсылка.СчетФактураПолученный"/>
						<КодПравилаКонвертации>СчетФактураПолученный                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>1350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
	</ПравилаКонвертацииОбъектов>
	<ПравилаВыгрузкиДанных>
		<Группа Отключить="false">
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>50</Порядок>
			<Правило Отключить="false">
				<Код>Валюты</Код>
				<Наименование>Валюты                                            </Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Валюты</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>КлассификаторСтранМира</Код>
				<Наименование>КлассификаторСтранМира                            </Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>КлассификаторСтранМира                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.СтраныМира</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>КлассификаторЕдиницИзмерения</Код>
				<Наименование>КлассификаторЕдиницИзмерения                      </Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ЕдиницыИзмерения</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Организации</Код>
				<Наименование>Организации                                       </Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Организации</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Контрагенты</Код>
				<Наименование>Контрагенты                                       </Наименование>
				<Порядок>250</Порядок>
				<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Контрагенты</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ДоговорыКонтрагентов</Код>
				<Наименование>ДоговорыКонтрагентов                              </Наименование>
				<Порядок>300</Порядок>
				<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ДоговорыКонтрагентов</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>БанковскиеСчета</Код>
				<Наименование>БанковскиеСчета                                   </Наименование>
				<Порядок>400</Порядок>
				<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.БанковскиеСчета</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВидыНоменклатуры</Код>
				<Наименование>ВидыНоменклатуры                                  </Наименование>
				<Порядок>450</Порядок>
				<КодПравилаКонвертации>ВидыНоменклатуры                                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ВидыНоменклатуры</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Номенклатура</Код>
				<Наименование>Номенклатура                                      </Наименование>
				<Порядок>500</Порядок>
				<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Номенклатура</ОбъектВыборки>
			</Правило>
		</Группа>
		<Группа Отключить="false">
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>100</Порядок>
			<Правило Отключить="false">
				<Код>ПоступлениеТоваровУслуг</Код>
				<Наименование>ПоступлениеТоваровУслуг                           </Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>ПоступлениеТоваровУслуг                           </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПоступлениеТоваровУслуг</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>Если Объект.ВидДокумента = Перечисления.ВидыДокументов.НакладнаяНаВозврат Тогда
	ИмяПКО = "ВозвратТоваровОтПокупателя";
	Если Объект.ВидОперации &lt;&gt; Перечисления.ВидыОпераций.Реализация Тогда
		Отказ = Истина;
	КонецЕсли;
ИначеЕсли Объект.ВидОперации &lt;&gt; Перечисления.ВидыОпераций.Реализация Тогда
	ИмяПКО = "КорректировкаПоступления";
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>СчетФактураПолученный</Код>
				<Наименование>СчетФактураПолученный                             </Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>СчетФактураПолученный                             </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.СчетФактураПолученный</ОбъектВыборки>
			</Правило>
		</Группа>
	</ПравилаВыгрузкиДанных>
	<ПравилаОчисткиДанных/>
	<Алгоритмы>
		<Алгоритм Имя="ЗаполнитьЕдиницыИзмерения" ИспользуетсяПриЗагрузке="true">
			<Текст>ТаблицаПараметров = ПараметрыОбъекта.Получить("ТоварыТабличнаяЧасть");

Если ТаблицаПараметров &lt;&gt; Неопределено Тогда
	
	ТаблицаЕдиницыИзмерения = Новый ТаблицаЗначений;
	ТаблицаЕдиницыИзмерения.Колонки.Добавить("НомерСтроки", Новый ОписаниеТипов("Число"));
	ТаблицаЕдиницыИзмерения.Колонки.Добавить("КодЕдиницыИзмеренияПоКлассификатору", Новый ОписаниеТипов("Строка", , Новый КвалификаторыСтроки(4)));
	Для Каждого СтрокаПараметров Из ТаблицаПараметров Цикл
		НоваяСтрока = ТаблицаЕдиницыИзмерения.Добавить();
		НоваяСтрока.НомерСтроки = СтрокаПараметров.НомерСтроки + 1;
		НоваяСтрока.КодЕдиницыИзмеренияПоКлассификатору = СтрокаПараметров.КодЕдиницыИзмеренияПоКлассификатору;
	КонецЦикла;
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	ТаблицаЕдиницыИзмерения.НомерСтроки КАК НомерСтроки,
		|	ТаблицаЕдиницыИзмерения.КодЕдиницыИзмеренияПоКлассификатору КАК КодЕдиницыИзмеренияПоКлассификатору
		|ПОМЕСТИТЬ ВТ_ЕдиницыИзмерения
		|ИЗ
		|	&amp;ТаблицаЕдиницыИзмерения КАК ТаблицаЕдиницыИзмерения
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	ТаблицаТовары.НомерСтроки КАК НомерСтроки,
		|	ТаблицаТовары.Номенклатура КАК Номенклатура
		|ПОМЕСТИТЬ ВТ_Товары
		|ИЗ
		|	&amp;ТаблицаТовары КАК ТаблицаТовары
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	ВТ_Товары.НомерСтроки КАК НомерСтроки,
		|	ВТ_Товары.Номенклатура КАК Номенклатура,
		|	ЕдиницыИзмерения.Ссылка КАК ЕдиницаИзмерения,
		|	ЕдиницыИзмерения.Коэффициент КАК Коэффициент
		|ИЗ
		|	ВТ_Товары КАК ВТ_Товары
		|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_ЕдиницыИзмерения КАК ВТ_ЕдиницыИзмерения
		|		ПО ВТ_Товары.НомерСтроки = ВТ_ЕдиницыИзмерения.НомерСтроки
		|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.КлассификаторЕдиницИзмерения КАК КлассификаторЕдиницИзмерения
		|		ПО ВТ_ЕдиницыИзмерения.КодЕдиницыИзмеренияПоКлассификатору = КлассификаторЕдиницИзмерения.Код
		|		И НЕ КлассификаторЕдиницИзмерения.ПометкаУдаления
		|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ЕдиницыИзмерения КАК ЕдиницыИзмерения
		|		ПО ВТ_Товары.Номенклатура = ЕдиницыИзмерения.Владелец
		|		И КлассификаторЕдиницИзмерения.Ссылка = ЕдиницыИзмерения.ЕдиницаПоКлассификатору
		|		И НЕ ЕдиницыИзмерения.ПометкаУдаления
		|
		|УПОРЯДОЧИТЬ ПО
		|	НомерСтроки";
	
	Запрос.УстановитьПараметр("ТаблицаЕдиницыИзмерения", ТаблицаЕдиницыИзмерения);
	Запрос.УстановитьПараметр("ТаблицаТовары", Объект.Товары.Выгрузить(,"НомерСтроки, Номенклатура"));
	
	Выборка = Запрос.Выполнить().Выбрать();
	
	Пока Выборка.СледующийПоЗначениюПоля("НомерСтроки") Цикл
		СтрокаТаблицы = Объект.Товары[Выборка.НомерСтроки - 1];
		СтрокаТаблицы.ЕдиницаИзмерения = Выборка.ЕдиницаИзмерения;
		СтрокаТаблицы.Коэффициент      = Выборка.Коэффициент;
	КонецЦикла;
	
КонецЕсли;</Текст>
			<Параметры>Объект</Параметры>
		</Алгоритм>
	</Алгоритмы>
	<Запросы/>
</ПравилаОбмена>